# ガチャ画像用ユーティリティまとめ

ガチャ画像のリサイズやトリミング、WebP変換などを行うPythonユーティリティをまとめたリポジトリです。

## ユーティリティ一覧
- `opt`: 画像の最適化（リサイズ、トリミング、WebP変換）
- `trim`: png画像のアルファ値0部分をトリミング
- `frame_composer`: `input` 内の 4:3 画像と `lib/frames` のフレームを突き合わせ、中央透過エリアに合わせて縮小＆合成し、`opt` のロジックで WebP へ変換

## 使い方
基本的に`/input`ディレクトリに画像を入れて、`/output`ディレクトリから結果を取得します。

```bash
python opt.py
```

### frame_composer の使い方

1. `input` 配下に、`lib/frames/*.png` と同じプレフィックス（例: `SSR_...png`）を持つ 4:3 画像を配置します。
2. 合成と WebP 変換を一括で行う:

   ```bash
   python frame_composer.py
   ```

   - `lib/frames/C.png` を解析して得た固定比率（横幅 91.15%、縦幅 93.26%、オフセット 4.4%/3.4%）を使って、各フレームの中央エリアへ 4:3（縦長）画像を押し込みます。
   - 一旦 PNG として一時保存し、`opt.convert_png_to_webp` の処理で WebP 化したものが `output` に書き出されます。
   - フレームが見つからないファイルはスキップされます。
